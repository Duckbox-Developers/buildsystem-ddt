From: Marc Kleine-Budde <mkl@pengutronix.de>
Date: Mon, 28 Jan 2013 14:21:07 +0100
Subject: [PATCH] build system: only pass real libs to SELINUX_LIBS

The busybox make system will fail otherwise.

Signed-off-by: Marc Kleine-Budde <mkl@pengutronix.de>
---
 Makefile.flags | 1 +
 1 file changed, 1 insertion(+)

diff --git a/Makefile.flags b/Makefile.flags
index 65021de25ffb..b9d0abb0dce5 100644
--- a/Makefile.flags
+++ b/Makefile.flags
@@ -153,6 +153,7 @@ ifeq ($(CONFIG_SELINUX),y)
 SELINUX_PC_MODULES = libselinux libsepol
 $(eval $(call pkg_check_modules,SELINUX,$(SELINUX_PC_MODULES)))
 CPPFLAGS += $(SELINUX_CFLAGS)
+SELINUX_LIBS := $(filter -l%,$(SELINUX_LIBS))
 LDLIBS += $(if $(SELINUX_LIBS),$(SELINUX_LIBS:-l%=%),$(SELINUX_PC_MODULES:lib%=%))
 endif
 
From: Dinny Wu <dinny.wu@gmail.com>
Date: Thu, 26 Jul 2012 14:12:51 +0000
Subject: [PATCH] Fix the format warning when building applets/usage_pod.c
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

When compiling busybox with gcc 4.6.3, it shows below warning:

applets/usage_pod.c: In function ‘main’:
applets/usage_pod.c:74:3: warning: format not a string literal and no format arguments [-Wformat-security]

Signed-off-by: Dinny Wu <dinny.wu@gmail.com>
---
 applets/usage_pod.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/applets/usage_pod.c b/applets/usage_pod.c
index ccc166aed708..9e6d3f0ee5b1 100644
--- a/applets/usage_pod.c
+++ b/applets/usage_pod.c
@@ -71,7 +71,7 @@ int main(void)
 		} else {
 			printf(", ");
 		}
-		printf(usage_array[i].aname);
+		printf("%s", usage_array[i].aname);
 		col += len2;
 	}
 	printf("\n\n");
From: Marc Kleine-Budde <mkl@pengutronix.de>
Date: Fri, 6 Nov 2009 09:19:58 +0100
Subject: [PATCH] reactivate check for tty

The busybox crew switched of the test for a tty in silentoldconfig,
we use this feature to break when oldconfig needs interaction
in automated build.

This patch reactivates this feature.

Signed-off-by: Marc Kleine-Budde <mkl@pengutronix.de>
---
 scripts/kconfig/conf.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/scripts/kconfig/conf.c b/scripts/kconfig/conf.c
index ea2446a89814..8b70f99e7633 100644
--- a/scripts/kconfig/conf.c
+++ b/scripts/kconfig/conf.c
@@ -539,7 +539,7 @@ int main(int ac, char **av)
 			break;
 		case 's':
 			input_mode = ask_silent;
-			valid_stdin = isatty(0); //bbox: && isatty(1) && isatty(2);
+			valid_stdin = isatty(0) && isatty(1) && isatty(2);
 			break;
 		case 'd':
 			input_mode = set_default;
From: Michael Olbrich <m.olbrich@pengutronix.de>
Date: Fri, 9 Mar 2018 19:50:05 +0100
Subject: [PATCH] build system: fix parallel building issue

The files generated by the include/config/MARKER target are in the
dependency list for applets/applet_tables.
If applets/applet_tables is created first during applets_dir then it will
be created again later as part of $(busybox-dirs).
As a result include/applet_tables.h is created again. This time while other
build commands may need it.

Change the dependency for include/applet_tables.h and include/NUM_APPLETS.h
on applets/applet_tables into a existence-only dependency. This way the
header files are not recreated even if applets/applet_tables is rebuilt.

Signed-off-by: Michael Olbrich <m.olbrich@pengutronix.de>
---
 applets/Kbuild.src | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/applets/Kbuild.src b/applets/Kbuild.src
index 3aedbbffef82..bf6014b92c5b 100644
--- a/applets/Kbuild.src
+++ b/applets/Kbuild.src
@@ -40,7 +40,7 @@ include/usage_compressed.h: applets/usage $(srctree_slash)applets/usage_compress
 quiet_cmd_gen_applet_tables = GEN     include/applet_tables.h include/NUM_APPLETS.h
       cmd_gen_applet_tables = applets/applet_tables include/applet_tables.h include/NUM_APPLETS.h
 
-include/NUM_APPLETS.h: applets/applet_tables
+include/NUM_APPLETS.h: | applets/applet_tables
 	$(call cmd,gen_applet_tables)
 
 # In fact, include/applet_tables.h depends only on applets/applet_tables,
@@ -53,5 +53,5 @@ include/NUM_APPLETS.h: applets/applet_tables
 # The alternative is to not list any command,
 # and then if include/applet_tables.h is deleted, it won't be rebuilt.
 #
-include/applet_tables.h: include/NUM_APPLETS.h applets/applet_tables
+include/applet_tables.h: include/NUM_APPLETS.h | applets/applet_tables
 	$(call cmd,gen_applet_tables)
